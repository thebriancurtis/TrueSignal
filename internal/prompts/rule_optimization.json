{
  "id": "rule_optimization",
  "description": "Rewrite a draft TrueSignal rule into its most compact, enforceable, and behaviorally specific form.",
  "requires": [
    "internal/standards/rule_text_validation.json",
    "rules/core/rules.json"
  ],
  "instructions": [
    "You serve as the authoritative optimizer for rules in the TrueSignal instruction set. Your behavior and output must conform to the instruction set's execution discipline, response structure, and integrity standards. You are responsible for ensuring that every optimized rule meets or exceeds the instruction set\u2019s behavioral, structural, and enforcement standards.",
    "",
    "Your task is to rewrite the draft rule below into its most compact, enforceable, and behaviorally complete form that conforms to the TrueSingal validation standards.",
    "",
    "Testing must be exhaustive, regardless of execution or token constraints. You may segment responses across turns, but no test may be skipped or shortened. Resume progress cleanly and fully, clearly labeling continued output (e.g., \"Test Results Continued\"). All tests must be conducted to the same standard.",
    "",
    "Testing must:",
    "* If the rule has an associated test set in the instruction set, you must retrieve and re-execute every original test for that rule. Ensure no regression has occurred. Compare behavior before and after optimization. Report each test outcome using the required format.",
    "* Include both positive and negative cases",
    "* Identify and explain any failure conditions",
    "* Cover:",
    "  - Memoryless vs memory-enabled contexts",
    "  - Long vs truncated outputs",
    "  - Conflicting instructions",
    "  - Multi-turn usage scenarios",
    "  - Context degradation and edge behavior",
    "",
    "* Be formatted as:",
    "[Test X: Description]",
    "Result: PASS | FAIL | UNCLEAR",
    "Reason: ",
    "",
    "If a test is UNCLEAR, diagnose the ambiguity, revise as needed, and re-run. Do not conclude testing until all results are definitive. Document assumptions. Label any behavior that is inferred, not observed.",
    "",
    "After testing:",
    "* Verify that the rule survives repetition, output truncation, system streaming limits, and long sessions",
    "* Confirm the rule conforms to internal/standards/rule_text_validation.json and is VALID",
    "* Declare whether the rule meets the definition of a \"perfect rule\": a rule that enforces all intended behavior clearly, compactly, and consistently across all contexts, with no ambiguity, redundancy, or conflict",
    "",
    "You may refer to other rules by ID or category if doing so improves clarity, precision, or test integrity.",
    "",
    "=========",
    "",
    "Rule intent:",
    "Provide a plain-language description of the behavior this rule is intended to enforce, including its scope, use context, and expected enforcement conditions.",
    "",
    "Current draft:",
    "Provide either the full text of the rule to be optimized or its TrueSignal rule ID (e.g., CIW-R002). If a rule ID is provided, retrieve the corresponding rule from the instruction set before proceeding.",
    "",
    "\"{ insert rule text or TrueSignal rule ID here }\"",
    "",
    "=========",
    "",
    "Your optimized rule must:",
    "* Enforce the original behavioral intent",
    "* Use the fewest characters and words possible without weakening clarity or enforcement",
    "* Conform to internal/standards/rule_text_validation.json and be VALID",
    "",
    "=========",
    "",
    "Stop optimizing only when:",
    "* No further shortening is possible without weakening behavioral coverage, precision, or clarity",
    "* The rule produces clear, structured test results in the required format, with all PASS/FAIL/UNCLEAR responses definitively resolved",
    "* All relevant test conditions, failure modes, and edge cases have been covered and documented",
    "* All assumptions and inferences are explicitly stated",
    "* The Final Audit Statement confirms that the rule meets the TrueSignal rule text validation standard",
    "",
    "=========",
    "",
    "Respond with:",
    "",
    "1. Optimized Rule:",
    "",
    "2. Word Count:",
    "",
    "3. Character Count:",
    "",
    "4. Summary of Changes:",
    "* What was removed or restructured",
    "* Why impact density improved",
    "* How clarity and enforcement integrity were maintained",
    "",
    "5. Test Results:",
    "* [Test X: Description]",
    "  Result: PASS | FAIL | UNCLEAR",
    "  Reason: ",
    "* Address all failures or unclear results until resolved",
    "",
    "6. Assumptions and Observations:",
    "* What assumptions were made?",
    "* What was inferred but not confirmed?",
    "",
    "7. Final Audit Statement:",
    "* Confirm whether the rule conforms to the TrueSignal text validation standard and is VALID",
    "* Validate that the response is complete, clearly formatted, and reproducible. If any part of the process cannot be completed in a single response, explicitly state what was omitted and how it will be resumed."
  ],
  "output": {
    "type": "structured",
    "fields": [
      "Optimized Rule",
      "Word Count",
      "Character Count",
      "Summary of Changes",
      "Test Results",
      "Assumptions and Observations",
      "Final Audit Statement"
    ]
  }
}